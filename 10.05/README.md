# Домашнее задание №4 к 10.05. 

## Задание. 
---
Вам необходимо сделать отчет и ответить на следующие вопросы. Ответы должны быть развернуты с рисунками или примерами кода.  
  
- [Домашнее задание №4 к 10.05.](#домашнее-задание-4-к-1005)
  - [Задание.](#задание)
  - [Отчет.](#отчет)
    - [1. История развития Stardog.](#1-история-развития-stardog)
    - [2. Инструменты для взаимодействия с Stardog.](#2-инструменты-для-взаимодействия-с-stardog)
    - [3. Какой database engine используется в Stardog?](#3-какой-database-engine-используется-в-stardog)
    - [4. Как устроен язык запросов в Stardog? Разверните БД с данными и выполните ряд запросов.](#4-как-устроен-язык-запросов-в-stardog-разверните-бд-с-данными-и-выполните-ряд-запросов)
    - [5. Возможно ли распределение файлов БД по разным носителям?](#5-возможно-ли-распределение-файлов-бд-по-разным-носителям)
    - [6. На каком языке/ах программирования написана Stardog?](#6-на-каком-языкеах-программирования-написана-stardog)
    - [7. Какие типы индексов поддерживаются в БД? Приведите пример создания индексов.](#7-какие-типы-индексов-поддерживаются-в-бд-приведите-пример-создания-индексов)
    - [8. Как строится процесс выполнения запросов в Stardog?](#8-как-строится-процесс-выполнения-запросов-в-stardog)
    - [9. Есть ли в Stardog понятие «план запросов»? Если да, объясните, как работает данный этап.](#9-есть-ли-в-stardog-понятие-план-запросов-если-да-объясните-как-работает-данный-этап)
    - [10. Поддерживаются ли транзакции в Stardog? Если да, то расскажите о нем. Если нет, то существует ли альтернатива?](#10-поддерживаются-ли-транзакции-в-stardog-если-да-то-расскажите-о-нем-если-нет-то-существует-ли-альтернатива)
    - [11. Какие методы восстановления поддерживаются в Stardog? Расскажите о них.](#11-какие-методы-восстановления-поддерживаются-в-stardog-расскажите-о-них)
    - [12. Расскажите про шардинг в Stardog. Какие типы используются? Принцип работы.](#12-расскажите-про-шардинг-в-stardog-какие-типы-используются-принцип-работы)
    - [13. Возможно ли применить термины Data Mining, Data Warehousing и OLAP в Stardog?](#13-возможно-ли-применить-термины-data-mining-data-warehousing-и-olap-в-stardog)
    - [14. Какие методы защиты поддерживаются Stardog? Шифрование трафика, модели авторизации и т.п.](#14-какие-методы-защиты-поддерживаются-stardog-шифрование-трафика-модели-авторизации-и-тп)
    - [15. Какие сообщества развивают Stardog? Кто в проекте имеет права на коммит и создание дистрибутива версий? Расскажите об этих людей и/или компаниях.](#15-какие-сообщества-развивают-stardog-кто-в-проекте-имеет-права-на-коммит-и-создание-дистрибутива-версий-расскажите-об-этих-людей-иили-компаниях)
    - [16. Создайте свои собственные данные для демонстрации работы Stardog.](#16-создайте-свои-собственные-данные-для-демонстрации-работы-stardog)
    - [17. Как продолжить самостоятельное изучение языка запросов с помощью демобазы. Если демобазы нет, то создайте ее.](#17-как-продолжить-самостоятельное-изучение-языка-запросов-с-помощью-демобазы-если-демобазы-нет-то-создайте-ее)
    - [18. Где найти документацию и пройти обучение?](#18-где-найти-документацию-и-пройти-обучение)
    - [19. Как быть в курсе происходящего?](#19-как-быть-в-курсе-происходящего)
  
## Отчет.
---

Моё домашнее задание посвящено СУБД Stardog.
| СУБД    | Модель      |
|---------|-------------|
| Stardog | Multi-model |

### 1. История развития Stardog.

Stardog была основана в 2008 году компанией Clark & Parsia, LLC. В начале своей истории, Stardog была реализована как чисто графовая база данных, которая использовалась в основном для хранения и анализа семантических данных.

С течением времени, Stardog начала развиваться в мультимодальную СУБД, которая поддерживает не только графовые данные, но и RDF и SQL. Она также получила новые функции, такие как поддержка спарк-запросов, машинное обучение, аналитику и интеграцию с другими технологиями, такими как Kubernetes и Docker.

В 2015 году была выпущена версия Stardog 4, которая была полностью переработана и получила множество новых функций. Stardog 4 стала первой версией, которая полностью поддерживала RDF, SQL и графовые данные.

Значимые релизы:
1. Stardog 1 (2012): Первый релиз Stardog, который представлял собой чисто графовую базу данных для хранения и анализа семантических данных.
2. Stardog 4 (2015): Версия, которая была полностью переработана и получила множество новых функций и обновлений. Некоторые новые функции: виртуальные графы, графы свойств, геопространственные данные.
3. Stardog 5 (2017): Релиз, в котором добавили предиктивную аналитику с возможностями машинного обучения. 
4. Stardog 6 (2018): Версия, которая перестала быть обратно-совместимой с предыдущими, в ней также стали поддерживать виртуальные графы для различных внешних СУБД. 
5. Stardog 8 (2022): Начиная с этой версии, начали избавляться от Deprecated функциональности.
6. Stardog 9 (2023-04-05): обновились до Java 11.

### 2. Инструменты для взаимодействия с Stardog.

*Stardog Studio*  - 
IDE для создания, управления и визуализации данных в Stardog. Позволяет работать с графами, моделями данных RDF и SQL, а также выполнять SPARQL-запросы и многие другие задачи.

*Stardog CLI*  - 
это инструмент командной строки, который позволяет вам взаимодействовать с Stardog через командную строку. 

*Stardog API* - 
это набор API, которые позволяет взаимодействовать с Stardog через программный интерфейс. 

### 3. Какой database engine используется в Stardog?

Stardog использует собственный графовый движок базы данных, который был разработан специально для работы с данными, представленными в формате RDF (Resource Description Framework) и OWL (Web Ontology Language). Этот движок базы данных предоставляет широкий набор функций для хранения, управления и анализа графовых данных, включая поддержку SPARQL-запросов, рассуждений (reasoning), индексирования и поиска по данным. Кроме того, Stardog также поддерживает SQL, что позволяет использовать его как реляционную базу данных для хранения и управления структурированными данными.

### 4. Как устроен язык запросов в Stardog? Разверните БД с данными и выполните ряд запросов. 

Язык запросов в Stardog называется SPARQL (SPARQL Protocol and RDF Query Language) и является стандартным языком запросов для баз данных, основанных на RDF.

Примеры SELECT запросов:

Общий вид SELECT запроса.
```sql
SELECT <variables>
WHERE {
   <graph-pattern>
}
```

Из туториала,
```sql
# 01a-albums.sparql
# dataset: beatles
prefix : <http://stardog.com/tutorial/>

SELECT ?album
WHERE {
   ?album rdf:type :Album .
}
```
Этот тройной шаблон отберет все соответствующие ему тройки из графа, у которых `rdf:type` - предикат, и `:Album` - объект.

Также, в SPARQL есть и другие виды запросов, например, `DESCRIBE`, `CONSTRUCT`, `ASK`, `PATHS`.

### 5. Возможно ли распределение файлов БД по разным носителям?

Да, возможно. С помощью механизма virtual graphs, можно объединять данные из разных источников (соответственно и разных носителей).

### 6. На каком языке/ах программирования написана Stardog?

Stardog написан на Java.

### 7. Какие типы индексов поддерживаются в БД? Приведите пример создания индексов.

Stardog поддерживает следующие типы secondary индексов:
* GeoSpatial
* Full Text

### 8. Как строится процесс выполнения запросов в Stardog?

Stardog выполняет запросы в два основных этапа: определение плана запроса и выполнение этого плана для получения ответа.
Первый называется query plan (или query optimization) и включает в себя все шаги, необходимые для выбора наиболее эффективного способа выполнения запроса. Как Stardog оценивает запрос, можно понять, только проанализировав план запроса. 

### 9. Есть ли в Stardog понятие «план запросов»? Если да, объясните, как работает данный этап.

Да, в Stardog есть понятие плана запросов.

Строительство плана запроса происходит в несколько этапов. Сначала запрос парсится и преобразуется во внутреннее представление, называемое алгеброй SPARQL (SPARQL Algebra). Затем Stardog использует оптимизатор запросов для преобразования алгебры SPARQL в более эффективный план запроса. Оптимизатор учитывает статистику БД, доступную в метаданных, и выбирает наилучшую последовательность операций, чтобы выполнить запрос с наименьшей возможной стоимостью.

### 10. Поддерживаются ли транзакции в Stardog? Если да, то расскажите о нем. Если нет, то существует ли альтернатива?

Да, поддерживаются. Stardog поддерживает ACID транзакции. 

*Atomicity.*  
Транзакции в Stardog являются атомарными, то есть либо все операции транзакции выполняются успешно, либо ни одна из них не выполняется.  
  
*Consistency.*  
Транзакции в Stardog являются согласованными, то есть транзакции не могут нарушать целостность данных.

*Isolation.*  
Транзакции в Stardog являются изолированными, то есть транзакции не могут влиять друг на друга.
Есть два уровня изоляции: SNAPSHOT и SERIALIZABLE. Зависит от переменной `transaction.isolation` в конфигурационном файле.

*Durability.*  
По умолчанию транзакционные записи Stardog долговечны, и никаких других действий не требуется.

### 11. Какие методы восстановления поддерживаются в Stardog? Расскажите о них.

*Commit Failure Autorecovery.*
Стратегия Stardog для автоматического восстановления после сбоя commit выглядит следующим образом:
1. Stardog откатит транзакцию в случае сбоя commit
2. Stardog переводит затронутую базу данных в offline состояние для обслуживания (замечание: Вероятность восстановления после катастрофического сбоя транзакции обратно пропорциональна количеству последующих попыток записи; следовательно, Stardog отключает базу данных, чтобы предотвратить последующие попытки записи и повысить вероятность восстановления.); затем
3. Stardog начнет восстановление, после чего вернет восстановленную базу данных в online режим.

### 12. Расскажите про шардинг в Stardog. Какие типы используются? Принцип работы.

Stardog Cluster использует модель строгой согласованности, что означает, что все узлы в кластере имеют все данные. Следовательно, когда клиент пишет в Stardog, это должно быть записано во все node'ы кластера, прежде чем кластер ответит клиенту. Нет понятия sharding или eventual consistency в Stardog Cluster.

### 13. Возможно ли применить термины Data Mining, Data Warehousing и OLAP в Stardog?

В документации и интернете нет упоминания подобных возможностей. 

### 14. Какие методы защиты поддерживаются Stardog? Шифрование трафика, модели авторизации и т.п.

Модель безопасности Stardog основана на стандартном ролевом контроле доступа:
- пользователи имеют разрешения на доступ к ресурсам во время сеансов
- разрешения могут быть сгруппированы по ролям
- роли могут быть назначены пользователям.

*Authentication.*   
Stardog использует Apache Shiro для аутентификации, авторизации и управления сеансами, а jBCrypt - для хэширования паролей.
Stardog предоставляет несколько способов авторизации пользователей:
- Default authentication (Stardog внутри управляет всем)
- LDAP Authentication (Stardog использует LDAP для аутентификации пользователей)
- Kerberos Authentication (Stardog использует Kerberos для аутентификации пользователей)

*Authorization.*   
Авторизация рабоатет следующим образом:
1. Пользователям и Ролям предоставляются разрешения на доступ к ресурсам независимо от того, какой способ аутентификации используется.
2. Хоть и возможно назначить разрешения пользователям напрямую, но лучше использовать роли, чтобы упростить управление разрешениями.

*Шифрование в процессе передачи данных.*  
Весь сетевой трафик между клиентами и Stardog может осуществляться по протоколам HTTP или HTTPS. Используется SSL.

Также есть различные настройки безопасности: Named Graph Security (позволяет ограничить доступ к различным графам для определенных пользователей и ролей), Virtual Graph Security (позволяет ограничить доступ к определенным источникам, которые используются в виртуальных графах), Property-based Data Protection (позволяет ограничить доступ к определенным свойствам в графах посредством дополнительной маркировки).

### 15. Какие сообщества развивают Stardog? Кто в проекте имеет права на коммит и создание дистрибутива версий? Расскажите об этих людей и/или компаниях.

Разработчиком и владельцем Stardog является команда Stardog-Union. 
Три основателя - Kendall Clark, Mike Grove, и Evren Sirin.  
В руководящей команде:
![team](images/team.png)  
Консультативный совет:  
![advisory](images/advisory.png)  
На [github](https://github.com/stardog-union) можно найти [состав](https://github.com/orgs/stardog-union/people) Stardog-Union. 

### 16. Создайте свои собственные данные для демонстрации работы Stardog.

В данном разделе предлагаю использовать написанный мною  генератор из предыдущего [домашнего задания](../26.04/README.md). В директории `26.04/redis-app/utils` лежит скрипт `generator.py`, в нём находится специальный метод для вывода данных в файл: `write_in_file`.

### 17. Как продолжить самостоятельное изучение языка запросов с помощью демобазы. Если демобазы нет, то создайте ее.

У Stardog есть свой набор туториалов, позволяющий научиться языку запросов. Вот различные [демо](https://cloud.stardog.com/kits), которые можно использовать и потренировать запросы к БД.

### 18. Где найти документацию и пройти обучение?

Документация - [ссылка](https://docs.stardog.com/).  
Обучение - [видео тренинги](https://www.stardog.com/trainings), [портал со всей информацией и различными туториалами](https://www.stardog.com/learn-stardog/).

### 19. Как быть в курсе происходящего?

На странице с документацией есть ссылка на [Release Notes](https://docs.stardog.com/release-notes/), там достаточно подробно описывают нововведения по каждому из продуктов.

Также к каждой глобальной версии (насколько я понимаю) выпускается Manual, например, [вот](https://s3.amazonaws.com/downloads.stardog.com/docs/6-2-3_stardog_manual.pdf).